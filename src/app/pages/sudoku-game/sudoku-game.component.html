<div class="flex flex-col items-center justify-center mx-auto">
  @if(completionMessage()) {
    <app-winning [imgSrc]="imgSrc"></app-winning>
  }
  <div class="bg-white sudoku-grid">
    <table class="mx-auto border-collapse">
      @for (row of grid(); track rowIndex; let rowIndex = $index) {
        <tr>
          @for (cell of row; track colIndex; let colIndex = $index) {
            <td
              [ngClass]="{
                'bg-white': isSolved(),
                'font-medium': isSolved(),
                'bg-gray-custom': isSolved() && !cell.isFixed,
                'bg-success': cell.isValid === true,
                'bg-error': cell.isValid === false,
                'bg-blue-200': selectedCell()?.row === rowIndex && selectedCell()?.col === colIndex,
                'fixed': cell.isFixed && !isSolved()
              }"
              (click)="onCellClick(rowIndex, colIndex)"
              class="w-12 h-12 text-center align-middle border border-gray-400 cursor-pointer"
              [style.transition]="'background-color 0.3s, color 0.3s'"
              [style.transition-delay]="isSolved() ? getDelay(rowIndex, colIndex) + 'ms' : '0ms'"
              [class.text-soft-pink]="isSolved()"
              [style.color]="isSolved() ? 'green' : 'black'"
            >
              @if(cell.value) {
                <span>{{ cell.value }}</span>
              }
            </td>
          }
        </tr>
      }
    </table>
  </div>

  <app-action-panel
    (reset)="restartGame()"
    (chooseAnotherCrossword)="goToSelectSudoku()"
  ></app-action-panel>
